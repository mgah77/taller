<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Vista tree: sólo lectura, sin enlaces -->
    <record id="view_product_zero_stock_tree" model="ir.ui.view">
        <field name="name">product.zero.stock.warehouse.tree</field>
        <field name="model">product.zero.stock.warehouse</field>
        <field name="arch" type="xml">
            <tree create="false" edit="false" delete="false">
                <field name="default_code"/>
                <field name="name"/>
                <field name="categ_id"/>
                <field name="qty_available"/>
            </tree>
        </field>
    </record>

    <!-- Acción -->
    <record id="action_product_zero_stock" model="ir.actions.act_window">
        <field name="name">Productos sin Stock</field>
        <field name="res_model">product.zero.stock.warehouse</field>
        <field name="view_mode">tree</field>
        <!-- Sólo la bodega asignada al usuario -->
        <field name="domain">[('warehouse_id', '=', user.warehouse_id.id)]</field>
        <field name="context">{}</field>
    </record>

    <!-- Menú hijo de Inventario -->
    <menuitem id="menu_product_zero_stock"
              name="Productos sin Stock"
              parent="stock.menu_stock_root"
              action="action_product_zero_stock"
              sequence="60"/>
</odoo>